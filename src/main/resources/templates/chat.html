<!DOCTYPE html>
<html lang="en" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{fragments/head :: head(~{::title})}">
    <title
            th:text="${setup.selectedUser != null ? setup.selectedUser.getFirstname() : ''}+' '+${setup.selectedUser != null ? setup.selectedUser.getLastname() : ''} + ' | Pigeon'"
    ></title>
</head>
<body class="dark_bg">
<span class="hidden" th:text="${setup.user.email}" id="user"></span>
<span class="hidden" th:text="${setup.selectedUser != null ? setup.selectedUser.email : ''}" id="selectedUser"></span>
<div class="vh-100 overflow-hidden d-flex container-fluid">
    <div class="row h-100 w-100 card chat_bg mx-auto">

        <!--   Chat List  Stars   -->
        <div th:replace="~{components/chatList :: chatList(${setup})}"></div>
        <!--    Chat List Ends    -->
        <!-- Chat Area Stars -->
        <div th:replace="~{components/chatArea :: chatArea(${setup})}"></div>
        <!-- Chat Area Ends -->
        <!--    User Profile Stars    -->
        <div th:replace="~{components/chatProfile :: chatProfile(${setup})}"></div>
        <!--    User Profile Ends    -->
    </div>
</div>

<!--Audio Starts-->
<audio th:src="@{'/audio/tone.mp3'}" class="hidden" id="msg-tone"></audio>
<!--Audio Ends-->
<!--Toast Starts-->

<div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="liveToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header">
            <strong class="me-auto">Message</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body" id="toast-body">
        </div>
    </div>
</div>

<!--Toast Ends-->
</body>
<script th:src="@{/js/sockjs.min.js}"></script>
<script th:src="@{/js/stomp.min.js}"></script>
<script th:src="@{/js/chat.js}" defer></script>
</html>